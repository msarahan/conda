#!/bin/sh
#
# `source deactivate` initial conditional check to determine which `source deactivate` to actually run
#
# assumes that deactivate.* can be found on the $PATH
#

# in some cases of zsh/ps/procps the `ps -p $$` command will return an error but it is not a
# critical terminating error:
#    > Signal 18 (CONT) caught by ps (procps-ng version 3.3.9).
#    > ps:display.c:66: please report this bug

# error clause
whichshell_args.bash "deactivate" "error-clause" | awk -f "`which whichshell.awk`"

# bourne shell clause (bash/zsh/dash/posh)
whichshell_args.bash "deactivate" "bourne-shell-clause" | awk -f "`which whichshell.awk`" && . deactivate.sh

# c-shell clause (tcsh/csh)
whichshell_args.bash "deactivate" "c-shell-clause" | awk -f "`which whichshell.awk`" && source "`which deactivate.csh`"
